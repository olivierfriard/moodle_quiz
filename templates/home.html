<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{ course_name }}</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css">
</head>

<body>
<section class="section">
<div class="container">
<div class="columns is-centered">
<div class="column is-half">
<div class="box">


{# display header #}
<div class="columns is-flex is-justify-content-space-between">
<!-- Left-aligned content -->
<div class="column is-narrow">
    
{% if self._TemplateReference__context.name != 'home.html' %}
<p class="is-size-4"><a href="{{ url_for('home', course=course) }}">X</a></p>
{% endif %}
</div>


{% if idx is defined %}
<!-- Center-aligned content -->
<div class="level-item has-text-centered">
<p>
<progress class="progress is-primary" value="{{ idx + 1 }}" max="{{ total }}"></progress>
</p>
</div>
{% endif %}

<!-- Right-aligned content -->
{% if lives is not none %}
<div class="column is-narrow has-text-right">
<p>
<img src="{{ url_for('send_static', filename='heart.svg') }}" width="30em">

<span class="has-text-danger">{{ lives if lives is not none else ''}}</span>

</p>
</div>
{% endif %}
</div>
    

<h1 class="title">{{ course_name }}</h1>

<div class="block">
<p class="subtitle">
{{ translation['Welcome'] }}
{% if session['nickname'] == 'admin' %}
<a href="{{ url_for('admin', course=course) }}">
 {% endif %} 
<strong>{{ session['nickname'] }}</strong>!
{% if session['nickname'] == 'admin' %}
</a>
 {% endif %} 
</p>
</div>



{% with messages = get_flashed_messages(with_categories=True) %}
{% if messages %}
{% for category, message in messages %}
{{ message }}
{% endfor %}
{% endif %}
{% endwith %}

{% if session['nickname'] %}

<a class="button is-large is-fullwidth"
{% if lives == 0 %}
disabled
{% else %}
href="{{ url_for('topic_list', course=course) }}" 
{% endif %}

style=" margin-bottom: 1.2em;"

>{{ translation['View topics'] }}</a>

<a class="button is-large is-fullwidth " href="{{ url_for('recover_lives',course=course) }}" style="margin-bottom: 1.2em;">
{{ translation['Recover lives'] }}
</a>


<a class="button is-large is-fullwidth "  style="margin-bottom: 1.2em;"
{% if brushup_availability %}
href="{{ url_for('brush_up_home',course=course) }}"
{% else %}
disabled
{% endif %}
>
{{ translation['Brush-up'] }}
</a>




{#

<div class="columns is-flex is-justify-content-space-between">
  <!-- Left-aligned content -->
  <div class="column is-narrow">
  <p>
    <a class="button is-large is-fullwidth " href="{{ url_for('brush_up',course=course, level=1) }}" style="margin-bottom: 1.2em;">
      {{ translation['Brush-up'] }} 1
      </a>
  </p>
  </div>
  

   <!-- Center-aligned content -->
   <div class="level-item has-text-centered">
      <p>
        <a class="button is-large is-fullwidth " href="{{ url_for('brush_up',course=course, level=2) }}" style="margin-bottom: 1.2em;">
          {{ translation['Brush-up'] }} 2
          </a>
            </p>
    </div>

  
  <!-- Right-aligned content -->
  <div class="column is-narrow has-text-right">
  <p>
    <a class="button is-large is-fullwidth " href="{{ url_for('brush_up',course=course, level=4) }}" style="margin-bottom: 1.2em;">
      {{ translation['Brush-up'] }} 4
      </a>
        
  </p>
  </div>
  </div>
    
#}





{% else %}

<a class="button is-link" href="{{ url_for('login', course=course) }}">Login</a>

<a class="button is-link" href="{{ url_for('new_nickname',course=course) }}">{{ translation['New nickname'] }}</a>

{% endif %}

</div>

{% if session['nickname'] %}
<a href="{{ url_for('logout', course=course) }}" class="button is-danger is-pulled-right" onclick="return confirm_()">{{ translation['Logout'] }}</a><br><br>
<a href="{{ url_for('delete', course=course) }}" class="button is-small is-danger is-pulled-right" onclick="return confirm_()">{{ translation['Delete nickname'] }}</a>
{%endif%}

</div>
       
</div>

</div>
</section>
</body>
<script>
function confirm_() {
    return confirm("Are you sure?");
}

function navigateToPage(url) {
      window.location.href = url;
    }
</script>

</html>