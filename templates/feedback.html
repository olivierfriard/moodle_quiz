<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback - Duolinzoo</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css">

</head>
<body>
<style>
.wrap-text-button {
    white-space: normal;
    word-break: break-word; /* Break long words if necessary */
}  
</style>
    <section class="section">
        <div class="container">
          <div class="columns is-centered">
            <div class="column is-half">

<div class="block">
  <a href="{{ url_for('home', course=course) }}" class="button is-link is-small">Home</a>
  <a href="{{ url_for('topic_list', course=course) }}" class="button is-link is-small">Topics</a>

</div>
                
{#
<div class="block">
  <strong>{{ topic }}</strong> | {{ idx + 1 }} / {{ total }}
</div>
#}

{% if lives is not none %}
<div class="block">
{% for i in range(lives) %}
<strong>&hearts;</strong>
{% endfor %}
</div>
{% endif %}

<h3 class="title">{{ topic }}   step #{{step}}</h3>
{#
{% if score is not none %}
<div class="block">
<strong>Score</strong> {{ score }}
<progress class="progress {% if score < 0.7 %}is-danger{% else %}is-success{% endif %}" value="{{ score }}" max="1"></progress>
</div>
{% endif %}
#}
<h2 class="title">{{ feedback.questiontext }}</h2>


<div class="block">
Your answer:<br>
<strong>{{ user_answer }}</strong>
</div>

{% if feedback.correct %}
<button class="button is-success is-fullwidth is-large wrap-text-button"><strong>{{ feedback.result }}</strong></button><br>

{%else%}

<button  class="button is-danger is-fullwidth is-large wrap-text-button"><strong>{{ feedback.result }}</strong></button><br>
{%endif%}
<br>

{% if flag_max_recover_errors %}


<!-- Modal -->
<div class="modal is-active" id="myModal">
  <div class="modal-background"></div>
  <div class="modal-content">
    <div class="box">

<button  class="button is-warning is-fullwidth is-large wrap-text-button" >
<strong>What a pity! You've failed to recover a life...</strong>
</button>
    </div>
  </div>
  <button class="modal-close is-large" aria-label="close"></button>
</div>

<script>
  // Close modal functionality
  document.querySelectorAll('.modal-close, .modal-background').forEach((closeButton) => {
    closeButton.addEventListener('click', () => {
      document.getElementById('myModal').classList.remove('is-active');
    });
  });
</script>


<a  class="button is-warning is-fullwidth is-large wrap-text-button" href="{{ url_for('home', course=course) }}">
  <strong>What a pity! You've failed to recover a life...<br>Click to retry</strong>
</a>

{% endif %}

{% if flag_recovered %}


<!-- Modal -->
<div class="modal is-active" id="myModal">
    <div class="modal-background"></div>
    <div class="modal-content">
      <div class="box">

<button  class="button is-success is-fullwidth is-large wrap-text-button">
  <strong>Congratulations! You've recovered one life!</strong>
</button>
      </div>
    </div>
    <button class="modal-close is-large" aria-label="close"></button>
  </div>

  <script>
    // Close modal functionality
    document.querySelectorAll('.modal-close, .modal-background').forEach((closeButton) => {
      closeButton.addEventListener('click', () => {
        document.getElementById('myModal').classList.remove('is-active');
      });
    });
  </script>

<a  class="button is-success is-fullwidth is-large wrap-text-button" href="{{ url_for('home', course=course) }}">
  <strong>Congratulations! You've recovered one life!<br>Click to continue</strong>
</a>


{% endif %}


{% if lives == 0 and not recover %}
<a  class="button is-warning is-fullwidth is-large wrap-text-button" href="{{ url_for('recover_lives', course=course) }}">
  <strong>You've lost all your lives...<br>Click to recover them.</strong>
</a>
{% endif %}

<br>

{% if not flag_max_recover_errors and not flag_recovered %}
<a href="{{ url_for('question', course=course, topic=topic, step=step,idx=idx+1) }}"  class="button is-fullwidth is-large">Next</a><br>
{% endif %}


</div>
</div>
</div>
</section>
</body>
</html>